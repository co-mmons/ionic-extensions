{"version":3,"file":"modal-module.js","sources":["../../../src/modal/modal-controller.ts","../../../src/modal/index.ts","../../../src/modal/modal-module.ts"],"sourcesContent":["import {Component, EventEmitter, Input, Output, TemplateRef, ViewChild} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\n\n@Component({\n    selector: \"ionx-modal-controller\",\n    template: `\n        <ng-template #modalContent>\n            <ng-content></ng-content>\n        </ng-template>\n    `\n})\nexport class ModalControllerComponent {\n\n    constructor(private controller: ModalController) {\n    }\n\n    @Input()\n    private cssClass: string;\n\n    @Input()\n    private backdropDismiss: boolean;\n\n    @Input()\n    private showBackdrop: boolean;\n\n    @ViewChild(\"modalContent\", {static: true})\n    private content: TemplateRef<any>;\n\n    @Output()\n    public readonly willEnter: EventEmitter<void> = new EventEmitter();\n\n    @Output()\n    public readonly didEnter: EventEmitter<void> = new EventEmitter();\n\n    @Output()\n    public readonly didDismiss: EventEmitter<void> = new EventEmitter();\n\n    @Output()\n    public readonly willDismiss: EventEmitter<void> = new EventEmitter();\n\n    private modal: HTMLIonModalElement;\n\n    public async present() {\n\n        // already opened - should we close existing and open new?\n        if (this.modal) {\n            return;\n        }\n        \n        this.modal = (await this.controller.create({component: ModalControllerContentComponent, componentProps: {template: this.content}, backdropDismiss: this.backdropDismiss, showBackdrop: this.showBackdrop, cssClass: this.cssClass}));\n\n        this.willEnter.next();\n\n        await this.modal.present();\n\n        this.didEnter.next();\n\n        this._presented = true;\n\n        if (await this.modal.onWillDismiss()) {\n            this.willDismiss.next();\n        }\n\n        if (await this.modal.onDidDismiss()) {\n            this.didDismiss.next();\n            this.modal = undefined;\n            this._presented = false;\n        }\n    }\n\n    private _presented: boolean = false;\n\n    public get presented() {\n        return this._presented;\n    }\n\n    public dismiss(data?: any, role?: any): Promise<any> {\n\n        if (this.modal) {\n            return this.modal.dismiss(data, role);\n        }\n\n        return new Promise<void>((resolve, reject) => {\n            resolve();\n        });\n    }\n\n}\n\n@Component({\n    template: `\n        <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n    `\n})\nexport class ModalControllerContentComponent {\n\n    constructor() {\n        //this.template = params.get(\"template\");\n    }\n\n    template: TemplateRef<any>;\n\n    ngOnDestroy() {\n        this.template = undefined;\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\n\nimport {ModalControllerComponent, ModalControllerContentComponent} from \"./modal-controller\";\n\nexport {ModalControllerComponent} from \"./modal-controller\";\n\n@NgModule({\n    declarations: [ModalControllerComponent, ModalControllerContentComponent],\n    exports: [ModalControllerComponent],\n    imports: [CommonModule, IonicModule],\n    entryComponents: [ModalControllerComponent, ModalControllerContentComponent]\n})\nexport class ModalModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ModalControllerContentComponent as Éµa} from './modal-controller';"],"names":[],"mappings":"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"}