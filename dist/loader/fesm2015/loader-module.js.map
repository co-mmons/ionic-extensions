{"version":3,"file":"loader-module.js","sources":["../../../src/loader/loader.ts","../../../src/loader/loader-controller.ts","../../../src/loader/index.ts","../../../src/loader/loader-module.ts"],"sourcesContent":["import {Component, ElementRef, HostBinding, Input, OnDestroy, OnInit} from \"@angular/core\";\nimport {LoaderOptions} from \"./loader-options\";\n\n@Component({\n    selector: \"ionx-loader\",\n    templateUrl: \"loader.html\",\n    styleUrls: [\"loader.scss\"]\n})\nexport class Loader implements OnInit, OnDestroy, LoaderOptions {\n\n    constructor(private elementRef: ElementRef<HTMLElement>) {\n    }\n\n    @Input()\n    @HostBinding(\"class.ionx--filled\")\n    fill: boolean;\n\n    @Input()\n    instanceCallback: (loader: Loader) => void;\n\n    @Input()\n    header: string;\n\n    @Input()\n    message: string;\n\n    @Input()\n    mode: \"spinner\" | \"progress\";\n\n    @Input()\n    progressMessage: string;\n\n    @Input()\n    progressType: \"determinate\" | \"indeterminate\" = \"determinate\";\n\n    @Input()\n    progressValue: number = 0;\n\n    @Input()\n    progressBuffer: number = 0;\n\n    @Input()\n    progressPercent: number;\n\n    get progressPercentVisible() {\n        return typeof this.progressPercent === \"number\";\n    }\n\n    get spinnerMode() {\n        return this.mode === \"spinner\";\n    }\n\n    get progressMode() {\n        return this.mode === \"progress\";\n    }\n\n    dismiss() {\n        return this.popover.dismiss();\n    }\n\n    private popover: HTMLIonPopoverElement;\n\n    ngOnInit() {\n        this.popover = this.elementRef.nativeElement.closest(\"ion-popover\");\n\n        if (this.instanceCallback) {\n            this.instanceCallback(this);\n        }\n    }\n\n    ngOnDestroy() {\n        this.popover = undefined;\n        this.instanceCallback = undefined;\n    }\n}\n","import {Injectable} from \"@angular/core\";\nimport {waitTill} from \"@co.mmons/js-utils/core\";\nimport {PopoverController} from \"@ionic/angular\";\nimport {Loader} from \"./loader\";\nimport {LoaderOptions} from \"./loader-options\";\n\n@Injectable()\nexport class LoaderController {\n\n    constructor(protected popoverController: PopoverController) {\n    }\n\n    async present(options: LoaderOptions) {\n\n        let loader: Loader;\n\n        const loaderInstance = (instance: Loader) => loader = instance;\n\n        const popover = await this.popoverController.create({\n            animated: false,\n            cssClass: \"ionx-popover-flex\",\n            backdropDismiss: false,\n            keyboardClose: false,\n            component: Loader,\n            componentProps: Object.assign({mode: \"spinner\"}, options, {\n                instanceCallback: (loader: Loader) => loaderInstance(loader)\n            })\n        });\n\n        // popover.style.setProperty(\"--width\", \"100%\");\n        // popover.style.setProperty(\"--maxHeight\", \"100%\");\n\n        // const content = popover.querySelector(\".popover-content\") as HTMLElement;\n        // content.style.background = \"transparent\";\n        // content.style.borderRadius = \"0px\";\n        // content.style.left = \"0px !important\";\n        // content.style.top = \"0px !important\";\n        // content.style.height = \"100%\";\n        // content.style.width = \"100%\";\n        // content.style.maxWidth = \"none\";\n        // content.style.maxHeight = \"none\";\n        // content.style.boxShadow = \"none\";\n\n        popover.present();\n\n        await waitTill(() => !!loader);\n\n        return loader;\n    }\n\n}\n\n\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {LoaderController} from \"./loader-controller\";\nimport {Loader} from \"./loader\";\n\nexport {Loader} from \"./loader\";\nexport {LoaderController} from \"./loader-controller\";\nexport {LoaderOptions} from \"./loader-options\";\n\n@NgModule({\n    declarations: [Loader],\n    imports: [IntlModule, IonicModule, CommonModule],\n    exports: [Loader],\n    entryComponents: [Loader],\n    providers: [LoaderController]\n})\nexport class LoaderModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}