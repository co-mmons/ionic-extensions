{"version":3,"file":"form-helper-module.js","sources":["../../../src/form-helper/heading.ts","../../../src/form-helper/helper.ts","../../../src/form-helper/item.ts","../../../src/form-helper/item-error.ts","../../../src/form-helper/item-hint.ts","../../../src/form-helper/index.ts","../../../src/form-helper/form-helper-module.ts"],"sourcesContent":["import {Component, HostBinding, Input} from \"@angular/core\";\n\n@Component({\n    selector: \"ionx-form-heading\",\n    template: `\n        <ng-content select=\"ion-item\"></ng-content>\n        <div ionx--under>\n            <ng-content></ng-content>\n        </div>\n    `,\n    styleUrls: [\"heading.scss\"]\n})\nexport class FormHeading {\n\n    constructor() {\n    }\n\n    @HostBinding(\"attr.sticky\")\n    @Input()\n    sticky: boolean;\n}\n","import {ContentChildren, Directive, ElementRef, Input, Optional, QueryList} from \"@angular/core\";\nimport {FormControlName, FormGroup, FormGroupDirective, NgForm} from \"@angular/forms\";\nimport scrollIntoView from \"scroll-into-view\";\n\n@Directive({\n    selector: \"[ionx-form-helper], [ionxFormHelper]\",\n    exportAs: \"ionxFormHelper\"\n})\nexport class FormHelper {\n\n    constructor(public readonly element: ElementRef, @Optional() public readonly ngForm: NgForm, @Optional() private readonly formGroupDirective: FormGroupDirective) {\n    }\n\n    @Input()\n    public get readonly(): boolean {\n        return this.element.nativeElement.hasAttribute(\"readonly\");\n    }\n\n    public set readonly(readonly: boolean) {\n        if (readonly) {\n            this.element.nativeElement.setAttribute(\"readonly\", \"\");\n        } else {\n            this.element.nativeElement.removeAttribute(\"readonly\");\n        }\n    }\n\n    public markAsReadonly() {\n        this.readonly = true;\n    }\n\n    @Input()\n    public get busy(): boolean {\n        return this.element.nativeElement.hasAttribute(\"busy\");\n    }\n\n    public set busy(busy: boolean) {\n        if (busy) {\n            this.element.nativeElement.setAttribute(\"busy\", \"\");\n        } else {\n            this.element.nativeElement.removeAttribute(\"busy\");\n        }\n    }\n\n    public markAsBusy() {\n        this.busy = true;\n    }\n\n    @ContentChildren(FormControlName, {descendants: true})\n    protected readonly contentControls: QueryList<FormControlName>;\n\n    public formControlName(name: string): FormControlName {\n\n        for (let a of this.contentControls.toArray()) {\n            if (a.name == name) {\n                return a;\n            }\n        }\n    }\n\n    public get formGroup(): FormGroup {\n        return this.formGroupDirective ? this.formGroupDirective.form : undefined;\n    }\n\n    public validateAll(markAs: \"touched\" | \"dirty\" = \"touched\") {\n\n        if (!this.formGroupDirective) {\n            return;\n        }\n\n        for (let controlName in this.formGroup.controls) {\n            let control = this.formGroup.controls[controlName];\n\n            if (markAs == \"touched\") {\n                control.markAsTouched();\n            }\n\n            if (markAs == \"dirty\") {\n                control.markAsDirty();\n            }\n\n            control.updateValueAndValidity();\n        }\n\n        for (let control of this.contentControls.toArray()) {\n            if (!control.valid) {\n                this.focusImpl(control);\n                break;\n            }\n        }\n    }\n\n    private focusImpl(control: string | any, scroll: boolean = true) {\n\n        if (typeof control == \"string\" && this.formGroupDirective) {\n            for (let c of this.formGroupDirective.directives) {\n                if (c.name == control) {\n                    control = c;\n                    break;\n                }\n            }\n        }\n\n        let element: HTMLElement;\n\n        if (control instanceof FormControlName) {\n            control = control.valueAccessor;\n        }\n\n        for (const elementProperty of [\"el\", \"_elementRef\", \"element\", \"elementRef\"]) {\n            if (control[elementProperty] instanceof ElementRef) {\n                element = control[elementProperty].nativeElement;\n                break;\n            } else if (control[elementProperty] instanceof HTMLElement) {\n                element = control[elementProperty];\n                break;\n            }\n        }\n\n        // element to focus\n        if (element) {\n\n            if (element[\"setFocus\"]) {\n                element[\"setFocus\"]();\n\n            } else {\n\n                let focusable = element;\n\n                let realInput = (element.shadowRoot && element.shadowRoot.querySelector(\".native-input\")) || element.querySelector(\".native-input\");\n                if (realInput) {\n                    focusable = realInput as HTMLElement;\n                }\n\n                focusable.focus();\n            }\n        }\n\n        if (scroll && element) {\n            scrollIntoView(element.closest(\"ion-item\") as HTMLElement || element);\n        }\n    }\n\n    public focus(formControlName: string, scrollIntoView: boolean = true) {\n        this.focusImpl(formControlName, scrollIntoView);\n    }\n}\n","import {Component} from \"@angular/core\";\n\n@Component({\n    selector: \"ionx-form-item\",\n    styleUrls: [\"item.scss\"],\n    template: `<ng-content select=\"ion-item\"></ng-content><ng-content select=\"ionx-form-item-error\"></ng-content><ng-content select=\"ionx-form-item-hint\"></ng-content><ng-content></ng-content>`\n})\nexport class FormItem {\n\n}\n","import {Component, Input} from \"@angular/core\";\nimport {AbstractControl, FormGroupDirective} from \"@angular/forms\";\n\n@Component({\n    selector: \"ionx-form-item-error\",\n    template: `\n        <ion-icon [name]=\"icon\" *ngIf=\"!!icon\"></ion-icon>\n        <label>\n            <ng-template [ngIf]=\"control\">{{control | intlValidationErrorMessage}}</ng-template>\n            <ng-content></ng-content>\n        </label>\n    `,\n    styleUrls: [\"item-error-item-hint.scss\", \"item-error.scss\"],\n    host: {\n        \"[class.ionx--visible]\": \"!control || !!(control.invalid && control[markedAs])\"\n    }\n})\nexport class FormItemError {\n\n    constructor(private formGroup: FormGroupDirective) {\n    }\n\n    @Input()\n    icon: string;\n\n    @Input()\n    markedAs: \"touched\" | \"dirty\" = \"touched\";\n\n    private _control: AbstractControl | string;\n\n    get control() {\n        if (typeof this._control === \"string\") {\n            return this.formGroup.form && this.formGroup.form.controls[this._control];\n        } else {\n            return this._control;\n        }\n    }\n\n    @Input(\"control\")\n    set controlOrName(control: AbstractControl | string) {\n        this._control = control;\n    }\n\n}\n","import {Component, ComponentRef, Input, ViewChild, ViewContainerRef} from \"@angular/core\";\n\n@Component({\n    selector: \"ionx-form-item-hint\",\n    styleUrls: [\"item-error-item-hint.scss\", \"item-hint.scss\"],\n    template: `\n        <ion-icon [name]=\"icon\" *ngIf=\"icon\"></ion-icon>\n        <label>\n            <template #labelComponentContainer></template>\n            <ng-content></ng-content>\n        </label>\n    `\n    })\nexport class FormItemHint {\n\n    constructor() {\n    }\n\n    @Input()\n    icon: string;\n\n    @ViewChild(\"labelComponentContainer\", {read: ViewContainerRef, static: true})\n    private labelComponentContainer: ViewContainerRef;\n\n    @Input()\n    set label(label: ComponentRef<any>) {\n        this.labelComponentContainer.clear();\n        this.labelComponentContainer.insert(label.hostView);\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {FormsModule} from \"@angular/forms\";\nimport {MatchMediaModule} from \"@co.mmons/angular-extensions/browser/match-media\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {FormHeading} from \"./heading\";\nimport {FormHelper} from \"./helper\";\nimport {FormItem} from \"./item\";\nimport {FormItemError} from \"./item-error\";\nimport {FormItemHint} from \"./item-hint\";\n\nexport * from \"./heading\";\nexport * from \"./helper\";\nexport * from \"./item\";\nexport * from \"./item-error\";\nexport * from \"./item-hint\";\n\n@NgModule({\n    declarations: [FormItem, FormHeading, FormItemError, FormItemHint, FormHelper],\n    imports: [CommonModule, FormsModule, IonicModule, IntlModule, MatchMediaModule],\n    exports: [FormItem, FormItemError, FormItemHint, FormHeading, FormHelper]\n})\nexport class FormHelperModule {\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}