{"version":3,"file":"lazy-image-module.js","sources":["../../../src/lazy-image/lazy-load.ts","../../../src/lazy-image/lazy-image.ts","../../../src/lazy-image/index.ts","../../../src/lazy-image/lazy-image-module.ts"],"sourcesContent":["import { LazyLoadOptions } from \"./lazy-load-options\";\n\nconst defaultOptions: LazyLoadOptions = {\n    selector: \"img\",\n    container: window,\n    scroll: null,\n    threshold: 300,\n    throttle: 150,\n    dataSrc: \"original\",\n    dataSrcSet: \"original-set\",\n    dataAlternate: \"alternate\",\n    classLoading: \"ionx-lazy-image-loading\",\n    classLoaded: \"ionx-lazy-image-loaded\",\n    skipInvisible: true,\n    callbackLoad: null,\n    callbackError: null,\n    callbackSet: null,\n    callbackProcessed: null\n};\n\nfunction _isInsideViewport(element, container, threshold) {\n\n    var ownerDocument, documentTop, documentLeft;\n\n    function _getDocumentWidth() {\n        return window.innerWidth || (ownerDocument.documentElement.clientWidth || document.body.clientWidth);\n    }\n\n    function _getDocumentHeight() {\n        return window.innerHeight || (ownerDocument.documentElement.clientHeight || document.body.clientHeight);\n    }\n\n    function _getTopOffset(element) {\n        return element.getBoundingClientRect().top + documentTop - ownerDocument.documentElement.clientTop;\n    }\n\n    function _getLeftOffset(element) {\n        return element.getBoundingClientRect().left + documentLeft - ownerDocument.documentElement.clientLeft;\n    }\n\n    function _isBelowViewport() {\n        var fold;\n        if (container === window) {\n            fold = _getDocumentHeight() + documentTop;\n        } else {\n            fold = _getTopOffset(container) + container.offsetHeight;\n        }\n        return fold <= _getTopOffset(element) - threshold;\n    }\n\n    function _isAtRightOfViewport() {\n        var fold;\n        if (container === window) {\n            fold = _getDocumentWidth() + window.pageXOffset;\n        } else {\n            fold = _getLeftOffset(container) + _getDocumentWidth();\n        }\n        return fold <= _getLeftOffset(element) - threshold;\n    }\n\n    function _isAboveViewport() {\n        var fold;\n        if (container === window) {\n            fold = documentTop;\n        } else {\n            fold = _getTopOffset(container);\n        }\n        return fold >= _getTopOffset(element) + threshold + element.offsetHeight;\n    }\n\n    function _isAtLeftOfViewport() {\n        var fold;\n        if (container === window) {\n            fold = documentLeft;\n        } else {\n            fold = _getLeftOffset(container);\n        }\n        return fold >= _getLeftOffset(element) + threshold + element.offsetWidth;\n    }\n\n    ownerDocument = element.ownerDocument;\n    documentTop = window.pageYOffset || ownerDocument.body.scrollTop;\n    documentLeft = window.pageXOffset || ownerDocument.body.scrollLeft;\n\n    return !_isBelowViewport() && !_isAboveViewport() && !_isAtRightOfViewport() && !_isAtLeftOfViewport();\n}\n\nfunction _now() {\n    var d = new Date();\n    return d.getTime();\n}\n\n\nfunction _convertToArray(nodeSet) {\n    return Array.prototype.slice.call(nodeSet);\n}\n\nfunction setSourcesForPicture(element, srcsetDataAttribute) {\n\n    let parent = element.parentElement;\n    if (parent.tagName !== 'PICTURE') {\n        return;\n    }\n\n    for (let i = 0; i < parent.children.length; i++) {\n        let pictureChild = parent.children[i];\n        if (pictureChild.tagName === 'SOURCE') {\n            let sourceSrcset = pictureChild.getAttribute('data-' + srcsetDataAttribute);\n            if (sourceSrcset) {\n                pictureChild.setAttribute('srcset', sourceSrcset);\n            }\n        }\n    }\n}\n\n/**\n * Sets sources (e.g. src) for lazy load element.\n * @param element Element, whose image to be loaded.\n * @param srcsetDataAttribute \n * @param srcDataAttribute \n */\nfunction setSources(element, srcsetDataAttribute, srcDataAttribute) {\n\n    let tagName = element.tagName.toUpperCase();\n    let elementSrc = element.getAttribute(\"data-\" + srcDataAttribute);\n    \n    if (tagName === \"IFRAME\") {\n        \n        if (elementSrc) {\n            element.setAttribute(\"src\", elementSrc);\n        }\n\n        return;\n\n    } else {\n        \n        if (tagName === \"IMG\") {\n            setSourcesForPicture(element, srcsetDataAttribute);\n        }\n\n        let dataTarget = element;\n        if (element[\"__ionxLazyImageTmpImg\"]) {\n            dataTarget = element[\"__ionxLazyImageTmpImg\"];\n        }\n\n        let imgSrcSet = element.getAttribute(\"data-\" + srcsetDataAttribute);\n        if (imgSrcSet) {\n            dataTarget.setAttribute(\"srcset\", imgSrcSet);\n        }\n\n        if (elementSrc) {\n            dataTarget.setAttribute(\"src\", elementSrc);\n        }\n\n        return;\n    }\n    //if (elementSrc) element.style.backgroundImage = \"url(\" + elementSrc + \")\";\n}\n\nfunction _bind(fn, obj) {\n    return function () {\n        return fn.apply(obj, arguments);\n    };\n}\n\nvar instanceCounter = 0;\nvar instances: {[instanceId: string]: LazyLoad} = {};\n\n\nexport class LazyLoad {\n\n    constructor(options?: LazyLoadOptions) {\n\n        this.id = (++instanceCounter) + \"\";\n        instances[this.id] = this;\n\n        this._options = Object.assign({}, defaultOptions, options);\n        this._queryOriginNode = this._options.container === window ? document : <HTMLElement|Document>this._options.container;\n\n        this._previousLoopTime = 0;\n        this._loopTimeout = null;\n\n        this._handleScrollFn = _bind(this.handleScroll, this);\n\n        window.addEventListener(\"resize\", this._handleScrollFn);\n        this.update();\n    }\n\n    private id: string;\n\n    private _options: LazyLoadOptions;\n\n    private _queryOriginNode: HTMLElement | Document;\n\n    private _previousLoopTime: number;\n\n    private _loopTimeout: any;\n\n    private _handleScrollFn: any;\n\n    private _elements: Array<HTMLElement & ExtendedHtmlElement>;\n\n\n    get container(): HTMLElement | Document {\n        return this._queryOriginNode;\n    }\n\n\n    private _showOnAppear(element: HTMLElement & ExtendedHtmlElement) {\n\n        let errorCallback = () => {\n\n            let eventTarget = element;\n\n            if (element[\"__ionxLazyImageTmpImg\"]) {\n                eventTarget = element[\"__ionxLazyImageTmpImg\"];\n            }\n\n            let alternate = this._options && this._options.dataAlternate && element.getAttribute(\"data-\" + this._options.dataAlternate);\n            if (alternate && eventTarget[\"src\"] != alternate) {\n                eventTarget[\"src\"] = alternate;\n                return;\n            }\n\n            delete element[\"__ionxLazyImageTmpImg\"];\n\n            eventTarget.removeEventListener(\"load\", loadCallback);\n            eventTarget.removeEventListener(\"error\", errorCallback);\n\n            element.lazyLoadError = true;\n\n            if (this._options) {\n                element.classList.remove(this._options.classLoading);\n\n                if (this._options.callbackError) {\n                    this._options.callbackError.callback_error(element);\n                }\n            }\n        }\n\n        let loadCallback = () => {\n\n            /* As this method is asynchronous, it must be protected against external destroy() calls */\n            if (this._options === null || this._options === undefined) {\n                return;\n            }\n            \n            let eventTarget: any = element;\n            \n            // if target element is not <img>, the real target of onload callback is temporary image\n            if (element[\"__ionxLazyImageTmpImg\"]) {\n                eventTarget = element[\"__ionxLazyImageTmpImg\"];\n                element.style.backgroundImage = `url(${eventTarget.src})`;\n                delete element[\"__ionxLazyImageTmpImg\"];\n            }\n\n            element.lazyLoadError = false;\n\n            if (this._options) {\n                if (this._options.callbackLoad) {\n                    this._options.callbackLoad(element);\n                }\n\n                element.classList.remove(this._options.classLoading);\n                element.classList.add(this._options.classLoaded);\n            }\n\n            eventTarget.removeEventListener(\"load\", loadCallback);\n            eventTarget.removeEventListener(\"error\", errorCallback);\n        }\n\n        if (this._options) {\n            element.classList.add(this._options.classLoading);\n        }\n\n        if (element.tagName.toUpperCase() === \"IMG\" || element.tagName.toUpperCase() === \"IFRAME\") {\n            element.addEventListener(\"load\", loadCallback);\n            element.addEventListener(\"error\", errorCallback);\n        } else {\n            let tmpImg = new Image();\n            tmpImg.addEventListener(\"load\", loadCallback);\n            tmpImg.addEventListener(\"error\", errorCallback);\n            element[\"__ionxLazyImageTmpImg\"] = tmpImg;\n        }\n\n        if (this._options) {\n            setSources(element, this._options.dataSrcSet, this._options.dataSrc);\n\n            if (this._options.callbackSet) {\n                this._options.callbackSet(element);\n            }\n        }\n    }\n\n    private _loopThroughElements() {\n\n        let elementsLength = (!this._elements) ? 0 : this._elements.length;\n        let processedIndexes = [];\n\n        for (let i = 0; i < elementsLength; i++) {\n            let element = this._elements[i];\n\n            // /* If must skip_invisible and element is invisible, skip it */\n            // if (this._options.skipInvisible && (element.offsetParent === null)) {\n            //     continue;\n            // }\n\n            if (_isInsideViewport(element, this._options.container, this._options.threshold)) {\n                this._showOnAppear(element);\n\n                /* Marking the element as processed. */\n                processedIndexes.push(i);\n                element.lazyLoadProcessed = true;\n            }\n        }\n\n        /* Removing processed elements from this._elements. */\n        while (processedIndexes.length > 0) {\n            this._elements.splice(processedIndexes.pop(), 1);\n\n            if (this._options.callbackProcessed) {\n                this._options.callbackProcessed(this._elements.length);\n            }\n        }\n\n        /* Stop listening to scroll event when 0 elements remains */\n        if (elementsLength === 0) {\n            this._stopScrollHandler();\n        }\n    };\n\n    private _purgeElements() {\n        let elementsToPurge = [];\n\n        for (let i = 0; i < this._elements.length; i++) {\n            let element = this._elements[i];\n\n            /* If the element has already been processed, skip it */\n            if (element.lazyLoadProcessed) {\n                elementsToPurge.push(i);\n            }\n        }\n\n        /* Removing elements to purge from this._elements. */\n        while (elementsToPurge.length > 0) {\n            this._elements.splice(elementsToPurge.pop(), 1);\n        }\n    };\n\n    private _isHandlingScroll: boolean;\n\n    private _startScrollHandler() {\n        if (!this._isHandlingScroll) {\n            this._isHandlingScroll = true;\n            this._options.container.addEventListener(\"scroll\", this._handleScrollFn);\n            if (this._options.scroll) {\n                this._options.scroll.addEventListener(\"scroll\", this._handleScrollFn);\n            }\n        }\n    };\n\n    private _stopScrollHandler() {\n        if (this._isHandlingScroll) {\n            this._isHandlingScroll = false;\n            this._options.container.removeEventListener(\"scroll\", this._handleScrollFn);\n            if (this._options.scroll) {\n                this._options.scroll.removeEventListener(\"scroll\", this._handleScrollFn);\n            }\n        }\n    };\n\n\n    public handleScroll() {\n        var remainingTime,\n            now,\n            throttle;\n\n        // IE8 fix for destroy() malfunctioning\n        if (!this._options) {\n            return;\n        }\n\n        now = _now();\n        throttle = this._options.throttle;\n\n        if (throttle !== 0) {\n            remainingTime = throttle - (now - this._previousLoopTime);\n            if (remainingTime <= 0 || remainingTime > throttle) {\n                if (this._loopTimeout) {\n                    clearTimeout(this._loopTimeout);\n                    this._loopTimeout = null;\n                }\n                this._previousLoopTime = now;\n                this._loopThroughElements();\n            } else if (!this._loopTimeout) {\n                this._loopTimeout = setTimeout(_bind(function () {\n                    this._previousLoopTime = _now();\n                    this._loopTimeout = null;\n                    this._loopThroughElements();\n                }, this), remainingTime);\n            }\n        } else {\n            this._loopThroughElements();\n        }\n    };\n\n    public update(options?: {retryError?: boolean}) {\n\n        this._elements = _convertToArray(this._queryOriginNode.querySelectorAll(this._options.selector));\n        if (options && options.retryError) {\n            for (let element of this._elements) {\n                if (element.lazyLoadProcessed && element.lazyLoadError) {\n                    element.lazyLoadProcessed = false;\n                }\n            }\n        }\n\n        this._purgeElements();\n        this._loopThroughElements();\n        this._startScrollHandler();\n    }\n\n    public destroy() {\n        window.removeEventListener(\"resize\", this._handleScrollFn);\n        if (this._loopTimeout) {\n            clearTimeout(this._loopTimeout);\n            this._loopTimeout = null;\n        }\n        this._stopScrollHandler();\n        this._elements = null;\n        this._queryOriginNode = null;\n        this._options = null;\n        \n        delete instances[this.id];\n    }\n\n}\n\nexport async function ensureLazyImagesLoaded(root: HTMLElement, options?: {retryError?: boolean}) {\n\n    for (let instanceId in instances) {\n        let loader: LazyLoad = instances[instanceId];\n        let container = loader.container;\n\n        if (root === container) {\n            loader.update({retryError: options && options.retryError});\n        } else {\n\n            let parent = container.parentElement;\n            while (parent && parent !== root) {\n                parent = parent.parentElement;\n            }\n\n            if (parent) {\n                loader.update({retryError: options && options.retryError});\n            }\n        }\n    }\n}\n\n\ninterface ExtendedHtmlElement {\n    lazyLoadProcessed?: boolean;\n    lazyLoadError?: boolean;\n}\n","import {ContentChildren, Directive, ElementRef, forwardRef, Inject, Input, Optional, QueryList, Renderer2} from \"@angular/core\";\nimport {sleep} from \"@co.mmons/js-utils/core\";\nimport {LazyLoad} from \"./lazy-load\";\nimport {LazyLoadOptions} from \"./lazy-load-options\";\n\n@Directive({\n\tselector: \"ion-content[ionx-lazy-image], [ionx-lazy-image-container]\"\n})\nexport class LazyImageContainer {\n\n\tconstructor(private element: ElementRef<HTMLElement>) {\n\t}\n\n\tprivate lazyLoad: LazyLoad;\n\n\trevalidate() {\n\n\t\tif (this.lazyLoad) {\n\n\t\t\tthis.lazyLoad.update();\n\n\t\t\tlet rect = this.element.nativeElement.getBoundingClientRect();\n\t\t\tif (rect.width == 0 || rect.height == 0) {\n\t\t\t\t//setTimeout(() => this.revalidate(), 200);\n\t\t\t}\n\t\t\t//console.log(this.children);\n\n\t\t\t//window.dispatchEvent(new Event(\"resize\"));\n\t\t}\n\t}\n\n\t@ContentChildren(forwardRef(() => LazyImage), {descendants: true})\n\tchildren: QueryList<LazyImage>;\n\n\tngOnInit() {\n\t\tthis.initLazyLoad();\n\t}\n\n\tngAfterContentInit() {\n\t\tthis.children.changes.subscribe(() => this.revalidate());\n\t\tif (this.children.length > 0) {\n\t\t\tthis.revalidate();\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.lazyLoad) {\n\t\t\tthis.lazyLoad.destroy();\n\t\t}\n\t}\n\n\tprivate async initLazyLoad() {\n\n\t\tlet options: LazyLoadOptions = {};\n\t\toptions.selector = \".ionx-lazy-image\";\n\t\toptions.container = this.element.nativeElement;\n\n\t\tif (this.element.nativeElement.tagName.toLowerCase() === \"ion-content\") {\n\n\t\t\tfor (let i = 0; i < 40; i++) {\n\t\t\t\toptions.scroll = this.element.nativeElement.shadowRoot && this.element.nativeElement.shadowRoot.querySelector(\".inner-scroll\");\n\n\t\t\t\tif (!options.scroll) {\n\t\t\t\t\tawait sleep(50);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.lazyLoad = new LazyLoad(options);\n\t}\n\n}\n\n@Directive({\n\tselector: \"[ionx-lazy-image]\"\n})\nexport class LazyImage {\n\n\tconstructor(public element: ElementRef, private renderer: Renderer2, @Optional() @Inject(forwardRef(() => LazyImageContainer)) private container?: LazyImageContainer) {\n\t}\n\n\t@ContentChildren(LazyImage, {descendants: true})\n\tchildren: QueryList<LazyImage>;\n\n\tprivate _src: string;\n\n\tprivate _alternate: string;\n\n\t@Input(\"ionx-lazy-image\")\n\tpublic set src(value: string) {\n\t\tthis._src = value;\n\t\tthis.reset();\n\t}\n\n\t@Input(\"ionx-lazy-image-alternate\")\n\tpublic set alternate(value: string) {\n\t\tthis._alternate = value;\n\t\tthis.reset();\n\t}\n\n\tprivate reset() {\n\n\t\tif (this._src) {\n\t\t\tthis.renderer.addClass(this.element.nativeElement, \"ionx-lazy-image\");\n\t\t\tthis.renderer.setAttribute(this.element.nativeElement, \"data-original\", this._src);\n\t\t}\n\n\t\tif (this._alternate) {\n\t\t\tthis.renderer.setAttribute(this.element.nativeElement, \"data-alternate\", this._alternate);\n\t\t}\n\t}\n\n\tprivate revalidate() {\n\n\t\t// children.length > 1 because this is also included in children query\n\t\tif (this.container && this.children.length > 1) {\n\t\t\tthis.container.revalidate();\n\t\t}\n\t}\n\n\tngAfterContentInit() {\n\t\tthis.children.changes.subscribe(() => this.revalidate());\n\t\tthis.revalidate();\n\t}\n\n}\n","import {NgModule} from \"@angular/core\";\nimport {LazyImage, LazyImageContainer} from \"./lazy-image\";\n\nexport {LazyImage, LazyImageContainer} from \"./lazy-image\";\nexport {ensureLazyImagesLoaded} from \"./lazy-load\";\n\n@NgModule({\n    declarations: [LazyImage, LazyImageContainer],\n    exports: [LazyImage, LazyImageContainer]\n})\nexport class LazyImageModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}