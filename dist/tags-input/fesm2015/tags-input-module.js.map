{"version":3,"file":"tags-input-module.js","sources":["../../../src/tags-input/tags-input.ts","../../../src/tags-input/index.ts","../../../src/tags-input/tags-input-module.ts"],"sourcesContent":["import {ChangeDetectorRef, Component, EventEmitter, forwardRef, HostBinding, HostListener, Input, Output, ViewChild} from \"@angular/core\";\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from \"@angular/forms\";\nimport {IonInput, Platform} from \"@ionic/angular\";\n\nexport const tagsValueAccessor = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TagsInput),\n    multi: true\n};\n\n@Component({\n    selector: \"ionx-tags-input\",\n    providers: [tagsValueAccessor],\n    templateUrl: \"tags-input.html\",\n    styleUrls: [\"tags-input.scss\"]\n})\nexport class TagsInput implements ControlValueAccessor {\n\n    constructor(public plt: Platform, public ref: ChangeDetectorRef) {\n    }\n\n    @HostBinding(\"class.readonly\")\n    @Input()\n    readonly: boolean = false;\n\n    @Input()\n    hideRemove: boolean = false;\n\n    @Input()\n    maxTags: number = -1;\n\n    @Input()\n    placeholder: string = \"+Tag\";\n\n    @Input()\n    type: string = \"text\";\n\n    @Input()\n    separatorStr: string = \",\";\n\n    @Input()\n    canEnterAdd: boolean = true;\n\n    @Input()\n    canBackspaceRemove: boolean = false;\n\n    @Input()\n    verifyFn: (tagSrt: string) => boolean;\n\n    @Input()\n    sortFn: (a: string, b: string) => number;\n\n    @Input()\n    sortable: boolean;\n\n\n    _once: boolean = false;\n\n    @Input()\n    set once(value: boolean | string) {\n        if (typeof value === \"string\") {\n            this._once = true;\n        } else {\n            this._once = value;\n        }\n    }\n\n    get once(): boolean | string {\n        return this._once;\n    }\n\n\n    @Output()\n    change: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    ionFocus: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    ionBlur: EventEmitter<any> = new EventEmitter();\n\n    @ViewChild(IonInput, {static: false})\n    input: IonInput;\n\n    _editTag: string = \"\";\n    _tags: string[] = [];\n    _isFocus: boolean = false;\n    _onChanged: Function;\n    _onTouched: Function;\n\n    keyAddTag(): any {\n        const tagStr = this._editTag.trim();\n\n        if (!this.canEnterAdd) {\n            return;\n        }\n\n        if (!this.verifyTag(tagStr)) {\n            return;\n        }\n\n        if (this.once && !this.isOnce(tagStr)) {\n            this._editTag = \"\";\n            return;\n        }\n\n        this.pushTag(tagStr);\n    }\n\n    separatorStrAddTag(): any {\n\n        if (!this.separatorStr) {\n            return;\n        }\n\n        if (this._editTag.indexOf(this.separatorStr) > -1) {\n\n            const tags = this._editTag.split(this.separatorStr);\n\n            for (let i = 0; i < tags.length; i++) {\n                const tag = tags[i].trim();\n\n                if (i < tags.length - 1) {\n                    if (this.verifyTag(tag) && this.isOnce(tag)) {\n                        this.pushTag(tag);\n                    }\n\n                } else {\n                    this._editTag = tag;\n                }\n            }\n        }\n    }\n\n    keyRemoveTag(ev: Event): any {\n\n        if (!this.canBackspaceRemove) {\n            return;\n        }\n\n        if (this._editTag === \"\") {\n            this.removeTag(-1);\n            this._editTag = \"\";\n        }\n    }\n\n    btnRemoveTag($index: number): any {\n        this.removeTag($index);\n        this.input.setFocus();\n    }\n\n    verifyTag(tagStr: string): boolean {\n\n        if (typeof this.verifyFn === \"function\") {\n            if (!this.verifyFn(tagStr)) {\n                this._editTag = \"\";\n                return false;\n            } else {\n                return true;\n            }\n        }\n\n        if (!tagStr.trim()) {\n            this._editTag = \"\";\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    pushTag(tagStr: string): any {\n\n        if (!this._tags) {\n            this._tags = [];\n        }\n\n        if (this._tags.indexOf(tagStr) > -1) {\n            return;\n        }\n\n        if (this.maxTags !== -1 && this._tags.length >= this.maxTags) {\n            this._editTag = \"\";\n            return;\n        }\n\n\n        this._tags.push(tagStr.trim());\n        this.sortTags();\n\n        this.ref.detectChanges();\n        this.change.emit(this._tags.slice());\n        this._editTag = \"\";\n\n        if (this._onChanged) {\n            this._onChanged(this._tags.slice());\n        }\n    }\n\n    private sortTags() {\n        if (this.sortable && this._tags) {\n            if (this.sortFn) {\n                this._tags.sort((a, b) => this.sortFn(a, b));\n            } else {\n                this._tags.sort((a, b) => a.localeCompare(b));\n            }\n        }\n    }\n\n    removeTag($index: number): any {\n        if (this._tags && this._tags.length > 0) {\n            if ($index === -1) {\n                this._tags.pop();\n                this.change.emit(this._tags);\n            } else if ($index > -1) {\n                this._tags.splice($index, 1);\n                this.change.emit(this._tags);\n            }\n\n            if (this._onChanged) {\n                this._onChanged(this._tags.slice());\n            }\n        }\n    }\n\n    isOnce(tagStr: string): boolean {\n        const tags: string[] = this._tags;\n\n        if (!tags) {\n            return true;\n        }\n\n        return tags.every((e: string): boolean => {\n            return e !== tagStr;\n        });\n    }\n\n    @HostListener(\"click\", [\"$event\"])\n    _click(ev: UIEvent): any {\n        if (!this._isFocus) {\n\n        }\n        this.focus();\n        ev.preventDefault();\n        ev.stopPropagation();\n    }\n\n    public blur() {\n\n        if (this._editTag) {\n            this.pushTag(this._editTag);\n        }\n\n        if (this._isFocus) {\n            this._isFocus = false;\n            this.ionBlur.emit(this._tags);\n        }\n    }\n\n    public focus(): any {\n        if (!this._isFocus) {\n            this._isFocus = true;\n\n            if (this.input) {\n                this.input.setFocus();\n            }\n\n            this.ionFocus.emit(this._tags);\n        }\n    }\n\n    writeValue(val: any): void {\n        this._tags = val;\n    }\n\n    registerOnChange(fn: any): void {\n        this._onChanged = fn;\n    }\n\n    registerOnTouched(fn: any): void {\n        this._onTouched = fn;\n    }\n\n    setValue(val: any): any {\n        this._tags = val;\n        this.sortTags();\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {TagsInput} from \"./tags-input\";\n\nexport {TagsInput} from \"./tags-input\";\n\n@NgModule({\n    declarations: [TagsInput],\n    exports: [TagsInput],\n    imports: [CommonModule, IonicModule, IntlModule, FormsModule, ReactiveFormsModule],\n    entryComponents: [TagsInput]\n})\nexport class TagsInputModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {tagsValueAccessor as Éµa} from './tags-input';"],"names":[],"mappings":"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"}