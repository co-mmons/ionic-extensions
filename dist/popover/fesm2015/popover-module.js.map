{"version":3,"file":"popover-module.js","sources":["../../../src/popover/popover-controller.ts","../../../src/popover/index.ts","../../../src/popover/popover-module.ts"],"sourcesContent":["import {Component, TemplateRef, Input, ViewChild, EventEmitter, Output, ViewEncapsulation} from \"@angular/core\";\nimport {PopoverController} from \"@ionic/angular\";\n\n@Component({\n    selector: \"ionx-popover-controller\",\n    encapsulation: ViewEncapsulation.None,\n    template: `\n        <ng-template #popoverContent>\n            <ng-content></ng-content>\n        </ng-template>\n    `\n})\nexport class PopoverControllerComponent {\n\n    constructor(private controller: PopoverController) {\n    }\n\n    @Input()\n    private cssClass: string;\n\n    @Input()\n    private enableBackdropDismiss: boolean;\n\n    @Input()\n    private showBackdrop: boolean;\n\n    @ViewChild(\"popoverContent\", {static: true})\n    private content: TemplateRef<any>;\n\n    @Output()\n    public readonly willEnter: EventEmitter<void> = new EventEmitter();\n\n    @Output()\n    public readonly didEnter: EventEmitter<void> = new EventEmitter();\n\n    @Output()\n    public readonly didDismiss: EventEmitter<void> = new EventEmitter();\n\n    @Output()\n    public readonly willDismiss: EventEmitter<void> = new EventEmitter();\n\n    private popover: HTMLIonPopoverElement;\n\n    public async present(event?: Event) {\n\n        // already opened - should we close existing and open new?\n        if (this.popover) {\n            return;\n        }\n        \n        this.popover = (await this.controller.create({component: PopoverControllerContentComponent, componentProps: {template: this.content}, backdropDismiss: this.enableBackdropDismiss, showBackdrop: this.showBackdrop, cssClass: this.cssClass, event: event}));\n\n        this.willEnter.next();\n\n        await this.popover.present();\n\n        this.didEnter.next();\n\n        this._presented = true;\n\n        if (await this.popover.onWillDismiss()) {\n            this.willDismiss.next();\n        }\n\n        this._dismissing = true;\n        if (await this.popover.onDidDismiss()) {\n            this.didDismiss.next();\n            this.popover = undefined;\n            this._presented = false;\n            this._dismissing = false;\n        }\n    }\n\n    private _dismissing: boolean = false;\n\n    public get dismissing(): boolean {\n        return this._dismissing;\n    }\n\n    private _presented: boolean = false;\n\n    public get presented() {\n        return this._presented;\n    }\n\n    public dismiss(data?: any, role?: any): Promise<any> {\n\n        if (this.popover) {\n            return this.popover.dismiss(data, role);\n        }\n\n        return new Promise<void>((resolve, reject) => {\n            resolve();\n        });\n    }\n\n}\n\n@Component({\n    encapsulation: ViewEncapsulation.None,\n    template: `\n        <ng-template [ngTemplateOutlet]=\"template\"></ng-template>\n    `\n})\nexport class PopoverControllerContentComponent {\n\n    constructor() {\n        //this.template = params.get(\"template\");\n    }\n\n    @Input()\n    template: TemplateRef<any>;\n\n    ngOnDestroy() {\n        this.template = undefined;\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {PopoverControllerComponent, PopoverControllerContentComponent} from \"./popover-controller\";\n\nexport {PopoverControllerComponent} from \"./popover-controller\";\n\n@NgModule({\n    declarations: [PopoverControllerComponent, PopoverControllerContentComponent],\n    exports: [PopoverControllerComponent],\n    imports: [IonicModule, CommonModule],\n    entryComponents: [PopoverControllerComponent, PopoverControllerContentComponent]\n})\nexport class PopoverModule {\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {PopoverControllerContentComponent as Éµa} from './popover-controller';"],"names":[],"mappings":"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"}