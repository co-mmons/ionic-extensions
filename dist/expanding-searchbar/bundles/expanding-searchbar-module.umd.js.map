{"version":3,"file":"expanding-searchbar-module.umd.js","sources":["../../../src/expanding-searchbar/expanding-searchbar-styles.ts","../../../src/expanding-searchbar/expanding-searchbar.ts","../../../src/expanding-searchbar/index.ts","../../../src/expanding-searchbar/expanding-searchbar-module.ts"],"sourcesContent":["import {Component} from \"@angular/core\";\n\n@Component({\n    template: \"\",\n    styleUrls: [\"expanding-searchbar.scss\"]\n})\nexport class ExpandingSearchbarStyles {\n}\n","import {ApplicationRef, ComponentFactoryResolver, Directive, ElementRef, Injector, Input} from \"@angular/core\";\nimport {unsubscribe} from \"@co.mmons/rxjs-utils\";\nimport {IonSearchbar} from \"@ionic/angular\";\nimport {Subscription} from \"rxjs\";\nimport {ExpandingSearchbarStyles} from \"./expanding-searchbar-styles\";\n\nconst expandedCssClass = \"ionx-expanding-searchbar-expanded\";\nconst parentCssClass = \"ionx-expanding-searchbar-parent\";\n\nlet stylesInjected = false;\n\n@Directive({\n    selector: \"ion-searchbar[ionx-expanding-searchbar]\",\n    exportAs: \"ionxExpandingSearchbar\"\n})\nexport class ExpandingSearchbar {\n\n    constructor(\n        injector: Injector,\n        resolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private element: ElementRef<HTMLIonSearchbarElement>,\n        private searchbar: IonSearchbar) {\n\n        if (!stylesInjected) {\n            let styles = resolver.resolveComponentFactory(ExpandingSearchbarStyles).create(injector);\n            this.appRef.attachView(styles.hostView);\n        }\n    }\n\n    private subscriptions: Subscription[] = [];\n\n    get parentElement() {\n\n        let parent = this.element.nativeElement.parentElement;\n        if (parent) {\n            return parent;\n        }\n    }\n\n    @Input(\"ionx-expanded\")\n    public get expanded(): boolean {\n        return this.element.nativeElement.classList.contains(expandedCssClass);\n    }\n\n    public set expanded(expanded: boolean) {\n        this.parentElement;\n\n        if (expanded) {\n            this.element.nativeElement.classList.add(expandedCssClass);\n            this.parentElement.classList.add(parentCssClass);\n            this.searchbar.setFocus();\n\n        } else {\n            this.element.nativeElement.classList.remove(expandedCssClass);\n            this.parentElement.classList.remove(parentCssClass);\n            //this.searchbar.value = \"\";\n            setTimeout(() => (this.element.nativeElement.querySelector(\".searchbar-input\") as HTMLElement).blur(), 50);\n        }\n    }\n\n    public expand() {\n        this.expanded = true;\n    }\n\n    collapseIfPossible(cleared?: boolean) {\n\n        if (this.expanded && (cleared || !this.searchbar.value)) {\n            setTimeout(() => {\n                this.expanded = false;\n            }, cleared ? 250 : 0);\n        }\n    }\n\n    ngOnInit() {\n        //this.subscriptions.push(this.searchbar.ionBlur.subscribe(() => this.collapseIfPossible()));\n        this.subscriptions.push(this.searchbar.ionClear.subscribe(() => this.collapseIfPossible(true)));\n        this.element.nativeElement.classList.add(\"ionx-expanding-searchbar\");\n    }\n\n    ngOnDestroy() {\n        unsubscribe(this.subscriptions);\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {ExpandingSearchbar} from \"./expanding-searchbar\";\nimport {ExpandingSearchbarStyles} from \"./expanding-searchbar-styles\";\n\nexport {ExpandingSearchbar} from \"./expanding-searchbar\";\n\n@NgModule({\n    declarations: [ExpandingSearchbar, ExpandingSearchbarStyles],\n    exports: [ExpandingSearchbar],\n    entryComponents: [ExpandingSearchbarStyles],\n    imports: [IonicModule]\n})\nexport class ExpandingSearchbarModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ExpandingSearchbarStyles as Éµa} from './expanding-searchbar-styles';"],"names":["Component","unsubscribe","Directive","Injector","ComponentFactoryResolver","ApplicationRef","ElementRef","IonSearchbar","Input","NgModule","IonicModule"],"mappings":";;;;;;AAMA,QAAA,wBAAA,kBAAA,YAAA;IAAA,IAAA,SAAA,wBAAA,GAAA;;;;;IAJC,IAAA,EAAA,IAAA,EAAAA,cAAS,EAAC,IAAA,EAAA,CAAA;IACP,gBAAA,QAAQ,EAAE,EAAE;;IAEf,aAAA,EAAA,EAAA;;;ICCD,IAAM,gBAAgB,GAAG,mCAAmC,CAAC;IAC7D,IAAM,cAAc,GAAG,iCAAiC,CAAC;IAEzD,IAAI,cAAc,GAAG,KAAK,CAAC;AAM3B,QAAA,kBAAA,kBAAA,YAAA;QAEI,SACI,kBAAA,CAAA,QAAkB,EAClB,QAAkC,EAC1B,MAAsB,EACtB,OAA4C,EAC5C,SAAuB,EAAA;IAFvB,QAAA,IAAM,CAAA,MAAA,GAAN,MAAM,CAAgB;IACtB,QAAA,IAAO,CAAA,OAAA,GAAP,OAAO,CAAqC;IAC5C,QAAA,IAAS,CAAA,SAAA,GAAT,SAAS,CAAc;IAQ3B,QAAA,IAAa,CAAA,aAAA,GAAmB,EAAE,CAAC;YANvC,IAAI,CAAC,cAAc,EAAE;IACjB,YAAA,IAAI,MAAM,GAAG,QAAQ,CAAC,uBAAuB,CAAC,wBAAwB,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACzF,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC3C,SAAA;SACJ;IAID,IAAA,MAAA,CAAA,cAAA,CAAI,kBAAa,CAAA,SAAA,EAAA,eAAA,EAAA;IAAjB,QAAA,GAAA,EAAA,YAAA;gBAEI,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC;IACtD,YAAA,IAAI,MAAM,EAAE;IACR,gBAAA,OAAO,MAAM,CAAC;IACjB,aAAA;aACJ;;;IAAA,KAAA,CAAA,CAAA;IAED,IAAA,MAAA,CAAA,cAAA,CACW,kBAAQ,CAAA,SAAA,EAAA,UAAA,EAAA;IADnB,QAAA,GAAA,EAAA,YAAA;IAEI,YAAA,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;aAC1E;IAED,QAAA,GAAA,EAAA,UAAoB,QAAiB,EAAA;gBAArC,IAcC,KAAA,GAAA,IAAA,CAAA;gBAbG,IAAI,CAAC,aAAa,CAAC;IAEnB,YAAA,IAAI,QAAQ,EAAE;oBACV,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAC3D,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;IACjD,gBAAA,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;IAE7B,aAAA;IAAM,iBAAA;oBACH,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;oBAC9D,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;;oBAEpD,UAAU,CAAC,cAAO,OAAA,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,kBAAkB,CAAiB,CAAC,IAAI,EAAE,GAAA,EAAE,EAAE,CAAC,CAAC;IAC9G,aAAA;aACJ;;;IAhBA,KAAA,CAAA,CAAA;IAkBM,IAAA,kBAAA,CAAA,SAAA,CAAA,MAAM,GAAN,YAAA;IACH,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxB,CAAA;QAED,kBAAkB,CAAA,SAAA,CAAA,kBAAA,GAAlB,UAAmB,OAAiB,EAAA;YAApC,IAOC,KAAA,GAAA,IAAA,CAAA;IALG,QAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;IACrD,YAAA,UAAU,CAAC,YAAA;IACP,gBAAA,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;iBACzB,EAAE,OAAO,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;IACzB,SAAA;SACJ,CAAA;IAED,IAAA,kBAAA,CAAA,SAAA,CAAA,QAAQ,GAAR,YAAA;YAAA,IAIC,KAAA,GAAA,IAAA,CAAA;;YAFG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAM,EAAA,OAAA,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAA7B,EAA6B,CAAC,CAAC,CAAC;YAChG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;SACxE,CAAA;IAED,IAAA,kBAAA,CAAA,SAAA,CAAA,WAAW,GAAX,YAAA;IACI,QAAAC,qBAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACnC,CAAA;;;;IAvEJ,IAAA,EAAA,IAAA,EAAAC,cAAS,EAAC,IAAA,EAAA,CAAA;IACP,gBAAA,QAAQ,EAAE,yCAAyC;IACnD,gBAAA,QAAQ,EAAE,wBAAwB;IACrC,aAAA,EAAA,EAAA;;;gBAdwEC,aAAQ,EAAA;gBAAzDC,6BAAwB,EAAA;gBAAxCC,mBAAc,EAAA;gBAAuCC,eAAU,EAAA;gBAE/DC,oBAAY,EAAA;;;IAsCf,IAAA,QAAA,EAAA,CAAA,EAAA,IAAA,EAAAC,UAAK,SAAC,eAAe,EAAA,EAAA,CAAA;;;AC3B1B,QAAA,wBAAA,kBAAA,YAAA;IAAA,IAAA,SAAA,wBAAA,GAAA;;;;;IANC,IAAA,EAAA,IAAA,EAAAC,aAAQ,EAAC,IAAA,EAAA,CAAA;IACN,gBAAA,YAAY,EAAE,CAAC,kBAAkB,EAAE,wBAAwB,CAAC;oBAC5D,OAAO,EAAE,CAAC,kBAAkB,CAAC;oBAC7B,eAAe,EAAE,CAAC,wBAAwB,CAAC;oBAC3C,OAAO,EAAE,CAACC,mBAAW,CAAC;IACzB,aAAA,EAAA,EAAA;;;ICZD;;IAEG;;;;;;;;;;;;"}