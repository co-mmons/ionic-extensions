{"version":3,"file":"expanding-searchbar-module.js","sources":["../../../src/expanding-searchbar/expanding-searchbar-styles.ts","../../../src/expanding-searchbar/expanding-searchbar.ts","../../../src/expanding-searchbar/index.ts","../../../src/expanding-searchbar/expanding-searchbar-module.ts"],"sourcesContent":["import {Component} from \"@angular/core\";\n\n@Component({\n    template: \"\",\n    styleUrls: [\"expanding-searchbar.scss\"]\n})\nexport class ExpandingSearchbarStyles {\n}\n","import {ApplicationRef, ComponentFactoryResolver, Directive, ElementRef, Injector, Input} from \"@angular/core\";\nimport {unsubscribe} from \"@co.mmons/rxjs-utils\";\nimport {IonSearchbar} from \"@ionic/angular\";\nimport {Subscription} from \"rxjs\";\nimport {ExpandingSearchbarStyles} from \"./expanding-searchbar-styles\";\n\nconst expandedCssClass = \"ionx-expanding-searchbar-expanded\";\nconst parentCssClass = \"ionx-expanding-searchbar-parent\";\n\nlet stylesInjected = false;\n\n@Directive({\n    selector: \"ion-searchbar[ionx-expanding-searchbar]\",\n    exportAs: \"ionxExpandingSearchbar\"\n})\nexport class ExpandingSearchbar {\n\n    constructor(\n        injector: Injector,\n        resolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private element: ElementRef<HTMLIonSearchbarElement>,\n        private searchbar: IonSearchbar) {\n\n        if (!stylesInjected) {\n            let styles = resolver.resolveComponentFactory(ExpandingSearchbarStyles).create(injector);\n            this.appRef.attachView(styles.hostView);\n        }\n    }\n\n    private subscriptions: Subscription[] = [];\n\n    get parentElement() {\n\n        let parent = this.element.nativeElement.parentElement;\n        if (parent) {\n            return parent;\n        }\n    }\n\n    @Input(\"ionx-expanded\")\n    public get expanded(): boolean {\n        return this.element.nativeElement.classList.contains(expandedCssClass);\n    }\n\n    public set expanded(expanded: boolean) {\n        this.parentElement;\n\n        if (expanded) {\n            this.element.nativeElement.classList.add(expandedCssClass);\n            this.parentElement.classList.add(parentCssClass);\n            this.searchbar.setFocus();\n\n        } else {\n            this.element.nativeElement.classList.remove(expandedCssClass);\n            this.parentElement.classList.remove(parentCssClass);\n            //this.searchbar.value = \"\";\n            setTimeout(() => (this.element.nativeElement.querySelector(\".searchbar-input\") as HTMLElement).blur(), 50);\n        }\n    }\n\n    public expand() {\n        this.expanded = true;\n    }\n\n    collapseIfPossible(cleared?: boolean) {\n\n        if (this.expanded && (cleared || !this.searchbar.value)) {\n            setTimeout(() => {\n                this.expanded = false;\n            }, cleared ? 250 : 0);\n        }\n    }\n\n    ngOnInit() {\n        //this.subscriptions.push(this.searchbar.ionBlur.subscribe(() => this.collapseIfPossible()));\n        this.subscriptions.push(this.searchbar.ionClear.subscribe(() => this.collapseIfPossible(true)));\n        this.element.nativeElement.classList.add(\"ionx-expanding-searchbar\");\n    }\n\n    ngOnDestroy() {\n        unsubscribe(this.subscriptions);\n    }\n}\n","import {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {ExpandingSearchbar} from \"./expanding-searchbar\";\nimport {ExpandingSearchbarStyles} from \"./expanding-searchbar-styles\";\n\nexport {ExpandingSearchbar} from \"./expanding-searchbar\";\n\n@NgModule({\n    declarations: [ExpandingSearchbar, ExpandingSearchbarStyles],\n    exports: [ExpandingSearchbar],\n    entryComponents: [ExpandingSearchbarStyles],\n    imports: [IonicModule]\n})\nexport class ExpandingSearchbarModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ExpandingSearchbarStyles as Éµa} from './expanding-searchbar-styles';"],"names":[],"mappings":"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"}